# 15. ä¸‰æ•°ä¹‹å’Œ

## ğŸ“ é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸‰ä¸ªå…ƒç´  a, b, cï¼Œä½¿å¾— a + b + c = 0ã€‚è¯·ä½ æ‰¾å‡ºæ‰€æœ‰å’Œä¸º 0 ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚

**æ³¨æ„**ï¼šç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚

**ç¤ºä¾‹ 1ï¼š**
```
è¾“å…¥ï¼šnums = [-1,0,1,2,-1,-4]
è¾“å‡ºï¼š[[-1,-1,2],[-1,0,1]]
è§£é‡Šï¼š
nums[0] + nums[1] + nums[2] = (-1) + 0 + 1 = 0
nums[1] + nums[2] + nums[4] = 0 + 1 + (-1) = 0
nums[0] + nums[3] + nums[4] = (-1) + 2 + (-1) = 0
ä¸åŒçš„ä¸‰å…ƒç»„æ˜¯ [-1,0,1] å’Œ [-1,-1,2]
```

**ç¤ºä¾‹ 2ï¼š**
```
è¾“å…¥ï¼šnums = [0,1,1]
è¾“å‡ºï¼š[]
```

**ç¤ºä¾‹ 3ï¼š**
```
è¾“å…¥ï¼šnums = [0,0,0]
è¾“å‡ºï¼š[[0,0,0]]
```

**çº¦æŸæ¡ä»¶ï¼š**
- `3 <= nums.length <= 3000`
- `-10^5 <= nums[i] <= 10^5`

---

## â­ è§£æ³•ï¼šæ’åº + åŒæŒ‡é’ˆ

### æ€è·¯

**æ ¸å¿ƒæ€æƒ³**ï¼šå°†"ä¸‰æ•°ä¹‹å’Œ"è½¬åŒ–ä¸º"ä¸¤æ•°ä¹‹å’Œ"

**æ­¥éª¤**ï¼š
1. **æ’åº**ï¼šå¯¹æ•°ç»„æ’åºï¼Œä¾¿äºå»é‡å’Œä½¿ç”¨åŒæŒ‡é’ˆ
2. **å›ºå®šç¬¬ä¸€ä¸ªæ•°**ï¼šéå†æ•°ç»„ï¼Œå›ºå®š `nums[i]`
3. **åŒæŒ‡é’ˆæ‰¾å¦å¤–ä¸¤ä¸ªæ•°**ï¼šåœ¨ `i` åé¢ç”¨åŒæŒ‡é’ˆæ‰¾ `nums[left] + nums[right] = -nums[i]`
4. **å»é‡**ï¼šè·³è¿‡é‡å¤çš„å…ƒç´ 

### ä»£ç å®ç°
```cpp
class Solution {
public:
    vector<vector<int>> threeSum(vector<int>& nums) {
        vector<vector<int>> result;
        int n = nums.size();
        
        // 1. æ’åº
        sort(nums.begin(), nums.end());
        
        // 2. éå†æ•°ç»„ï¼Œå›ºå®šç¬¬ä¸€ä¸ªæ•°
        for (int i = 0; i < n - 2; i++) {
            // å‰ªæï¼šå¦‚æœæœ€å°çš„æ•°éƒ½ > 0ï¼Œåé¢ä¸å¯èƒ½æœ‰è§£
            if (nums[i] > 0) break;
            
            // å»é‡ï¼šè·³è¿‡é‡å¤çš„ç¬¬ä¸€ä¸ªæ•°
            if (i > 0 && nums[i] == nums[i-1]) continue;
            
            // 3. åŒæŒ‡é’ˆæ‰¾å¦å¤–ä¸¤ä¸ªæ•°
            int left = i + 1, right = n - 1;
            int target = -nums[i];
            
            while (left < right) {
                int sum = nums[left] + nums[right];
                
                if (sum == target) {
                    result.push_back({nums[i], nums[left], nums[right]});
                    
                    // å»é‡ï¼šè·³è¿‡é‡å¤çš„ left
                    while (left < right && nums[left] == nums[left+1]) left++;
                    // å»é‡ï¼šè·³è¿‡é‡å¤çš„ right
                    while (left < right && nums[right] == nums[right-1]) right--;
                    
                    left++;
                    right--;
                } else if (sum < target) {
                    left++;  // å’Œå¤ªå°ï¼Œå·¦æŒ‡é’ˆå³ç§»
                } else {
                    right--;  // å’Œå¤ªå¤§ï¼Œå³æŒ‡é’ˆå·¦ç§»
                }
            }
        }
        
        return result;
    }
};
```

### å¤æ‚åº¦åˆ†æ
- **æ—¶é—´å¤æ‚åº¦**ï¼šO(nÂ²)
  - æ’åºï¼šO(n log n)
  - å¤–å±‚å¾ªç¯ï¼šO(n)
  - å†…å±‚åŒæŒ‡é’ˆï¼šO(n)
  - æ€»è®¡ï¼šO(n log n + nÂ²) = O(nÂ²)
- **ç©ºé—´å¤æ‚åº¦**ï¼šO(log n)ï¼Œæ’åºçš„æ ˆç©ºé—´

---

## ğŸ¯ æ ¸å¿ƒçŸ¥è¯†ç‚¹

### 1. é™ç»´æ€æƒ³

**ä¸‰æ•°ä¹‹å’Œ â†’ ä¸¤æ•°ä¹‹å’Œ**ï¼š
- å›ºå®šä¸€ä¸ªæ•° `nums[i]`
- é—®é¢˜è½¬åŒ–ä¸ºï¼šåœ¨å‰©ä½™æ•°ç»„ä¸­æ‰¾ä¸¤ä¸ªæ•°ï¼Œå’Œä¸º `-nums[i]`
- è¿™å°±æ˜¯"ä¸¤æ•°ä¹‹å’Œ"é—®é¢˜

### 2. æ’åºçš„ä½œç”¨

æ’åºåçš„å¥½å¤„ï¼š
1. **ä½¿ç”¨åŒæŒ‡é’ˆ**ï¼šæœ‰åºæ•°ç»„å¯ä»¥ç”¨å¯¹æ’æŒ‡é’ˆ
2. **æ–¹ä¾¿å»é‡**ï¼šç›¸åŒçš„å…ƒç´ ç›¸é‚»ï¼Œå®¹æ˜“è·³è¿‡
3. **å‰ªæä¼˜åŒ–**ï¼šå¦‚æœ `nums[i] > 0`ï¼Œåé¢éƒ½æ˜¯æ­£æ•°ï¼Œä¸å¯èƒ½å’Œä¸º 0

### 3. å»é‡ç­–ç•¥

**ä¸‰ä¸ªä½ç½®éƒ½éœ€è¦å»é‡**ï¼š

```cpp
// ç¬¬ä¸€ä¸ªæ•°å»é‡
if (i > 0 && nums[i] == nums[i-1]) continue;

// ç¬¬äºŒä¸ªæ•°å»é‡
while (left < right && nums[left] == nums[left+1]) left++;

// ç¬¬ä¸‰ä¸ªæ•°å»é‡
while (left < right && nums[right] == nums[right-1]) right--;
```

**æ³¨æ„**ï¼š
- ç¬¬ä¸€ä¸ªæ•°ï¼š`i > 0` ä¿è¯ä¸è·³è¿‡ç¬¬ä¸€ä¸ªå…ƒç´ 
- åä¸¤ä¸ªæ•°ï¼šæ‰¾åˆ°ç»“æœåå†å»é‡

---

## ğŸ” å›¾è§£è¿‡ç¨‹

ä»¥ `nums = [-1, 0, 1, 2, -1, -4]` ä¸ºä¾‹ï¼š

```
æ’åºåï¼š[-4, -1, -1, 0, 1, 2]

i=0, nums[0]=-4, target=4
  left=1, right=5: -1+2=1 < 4, left++
  left=2, right=5: -1+2=1 < 4, left++
  left=3, right=5: 0+2=2 < 4, left++
  left=4, right=5: 1+2=3 < 4, left++
  left=5, right=5: ç»“æŸ

i=1, nums[1]=-1, target=1
  left=2, right=5: -1+2=1 == 1 âœ“ æ‰¾åˆ° [-1,-1,2]
  å»é‡ï¼šleft++, right--
  left=3, right=4: 0+1=1 == 1 âœ“ æ‰¾åˆ° [-1,0,1]
  å»é‡ï¼šleft++, right--
  left=4, right=3: ç»“æŸ

i=2, nums[2]=-1 == nums[1], è·³è¿‡ï¼ˆå»é‡ï¼‰

i=3, nums[3]=0 > 0, breakï¼ˆå‰ªæï¼‰

ç»“æœï¼š[[-1,-1,2], [-1,0,1]]
```

---

## ğŸ”¨ å¸¸è§é”™è¯¯

### é”™è¯¯1ï¼šå»é‡ä½ç½®é”™è¯¯
```cpp
// âŒ é”™è¯¯ï¼šè·³è¿‡äº†ç¬¬ä¸€ä¸ª -1
if (nums[i] == nums[i-1]) continue;

// âœ… æ­£ç¡®ï¼šä¿ç•™ç¬¬ä¸€ä¸ªï¼Œè·³è¿‡åç»­é‡å¤
if (i > 0 && nums[i] == nums[i-1]) continue;
```

### é”™è¯¯2ï¼šæ‰¾åˆ°è§£åå¿˜è®°ç§»åŠ¨æŒ‡é’ˆ
```cpp
if (sum == target) {
    result.push_back({nums[i], nums[left], nums[right]});
    // âŒ å¿˜è®°ç§»åŠ¨æŒ‡é’ˆï¼Œä¼šæ­»å¾ªç¯
}

// âœ… æ­£ç¡®
if (sum == target) {
    result.push_back({nums[i], nums[left], nums[right]});
    left++;
    right--;
}
```

### é”™è¯¯3ï¼šå»é‡æ—¶è¶Šç•Œ
```cpp
// âŒ å¯èƒ½è¶Šç•Œ
while (nums[left] == nums[left+1]) left++;

// âœ… æ­£ç¡®
while (left < right && nums[left] == nums[left+1]) left++;
```

---

## ğŸ“ å˜å¼é¢˜ç›®

### 1. æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œï¼ˆLeetCode 16ï¼‰
æ‰¾ä¸‰ä¸ªæ•°ä½¿å¾—å’Œæœ€æ¥è¿‘ç›®æ ‡å€¼ã€‚

### 2. å››æ•°ä¹‹å’Œï¼ˆLeetCode 18ï¼‰
æ‰¾å››ä¸ªæ•°çš„å’Œç­‰äºç›®æ ‡å€¼ã€‚

**æ€è·¯**ï¼šå†åŠ ä¸€å±‚å¾ªç¯ï¼Œå›ºå®šä¸¤ä¸ªæ•°ï¼ŒåŒæŒ‡é’ˆæ‰¾å¦å¤–ä¸¤ä¸ªã€‚

### 3. ä¸‰æ•°ä¹‹å’Œçš„å¤šç§å¯èƒ½
æ‰¾å‡ºæ‰€æœ‰å’Œä¸º 0 çš„ä¸‰å…ƒç»„æ•°é‡ï¼ˆå¯ä»¥é‡å¤ä½¿ç”¨å…ƒç´ ï¼‰ã€‚

---

## ğŸ“Œ è®°å¿†è¦ç‚¹

- **æ¨¡å¼**ï¼šn æ•°ä¹‹å’Œ â†’ å›ºå®š n-2 ä¸ªï¼ŒåŒæŒ‡é’ˆæ‰¾å‰©ä½™ 2 ä¸ª
- **å‰æ**ï¼šæ•°ç»„å¿…é¡»æ’åº
- **æŠ€å·§**ï¼š
  1. æ’åº
  2. å›ºå®šç¬¬ä¸€ä¸ªæ•°
  3. åŒæŒ‡é’ˆæ‰¾å¦å¤–ä¸¤ä¸ª
  4. ä¸‰ä¸ªä½ç½®éƒ½è¦å»é‡
- **å¤æ‚åº¦**ï¼šO(nÂ²) æ—¶é—´ï¼ŒO(1) ç©ºé—´ï¼ˆä¸è®¡ç»“æœï¼‰

---

## ğŸ”§ ä¼˜åŒ–æŠ€å·§

### å‰ªæ1ï¼šæœ€å°å€¼å‰ªæ
```cpp
if (nums[i] > 0) break;  // æœ€å°çš„éƒ½ > 0ï¼Œåé¢ä¸å¯èƒ½å’Œä¸º 0
```

### å‰ªæ2ï¼šè·³è¿‡ä¸å¯èƒ½çš„æƒ…å†µ
```cpp
// å¦‚æœå½“å‰æœ€å°çš„ä¸‰ä¸ªæ•°ä¹‹å’Œ > 0ï¼Œåé¢éƒ½ä¸å¯èƒ½
if (nums[i] + nums[i+1] + nums[i+2] > 0) break;

// å¦‚æœå½“å‰æ•°åŠ ä¸Šæœ€å¤§çš„ä¸¤ä¸ªæ•° < 0ï¼Œå½“å‰æ•°å¤ªå°ï¼Œè·³è¿‡
if (nums[i] + nums[n-2] + nums[n-1] < 0) continue;
```

---

**æ ‡ç­¾**ï¼š`æ•°ç»„` `åŒæŒ‡é’ˆ` `æ’åº` `medium`
